# БДДС - Полная спецификация дизайна из Figma

## Источник
- **Figma URL**: https://www.figma.com/design/nTnZtay5fDD7DZDd5THi2H/
- **File Key**: `nTnZtay5fDD7DZDd5THi2H`
- **Section ID**: 14917:185 (БДДС с кредитом)

---

## Все версии макета

### Обзор фреймов

| ID | Название | Размер | Статус |
|----|----------|--------|--------|
| 14917:186 | Десктоп (основной) | 1280×720 | Активен |
| 14917:361 | Десктоп (с дельтой) | 1280×720 | Активен |
| 14917:516 | Десктоп (с dropdown) | 1280×720 | Активен |
| 14917:720 | Планшет | 768×1283 | hidden |
| 14917:851 | Планшет (вариант 2) | 768×1283 | hidden |
| 14917:1017 | Планшет (вариант 3) | 768×1283 | hidden |
| 14917:1124 | Планшет (вариант 4) | 768×1283 | hidden |
| 14917:1287 | Мобильная версия | 320×1360 | Активен |
| 14917:1477 | Мобильная версия 2 | 320×1360 | Активен |
| 14917:1696 | Мобильная версия 3 | 320×1360 | Активен |

---

## 1. ДЕСКТОП (1280×720)

### 1.1 Основной вариант (14917:186)

#### Контейнер карточки
```
- Размер: 1098×655px
- Позиция: x=44, y=26
- Фон: #FFFFFF
- Border radius: 21px
- Тень: 0px 4px 21.7px rgba(0,0,0,0.25)
```

#### Заголовок отчёта
```
Текст: "Бюджет по фондам, тыс. ₽"
- Позиция: x=80, y=57
- Размер: 342×29px
- Шрифт: Montserrat Bold 24px
- Цвет: #000000
```

#### Селектор фонда
```
Иконка здания:
- Позиция: x=81, y=99
- Размер: 24×24px
- Цвет: #9DBCE0

Название фонда "ДВН":
- Позиция: x=110, y=100
- Шрифт: Montserrat Regular 20px
- Цвет: #000000

Стрелка dropdown:
- Позиция: x=165, y=101
- Размер: 22×22px
```

#### Ссылка "Детали за текущий год"
```
- Позиция: x=593, y=111
- Размер: 143×15px
- Шрифт: Montserrat Regular 12px
- Стиль: underline
- Цвет: #000000
- Иконка стрелки: 8×8px, поворот 316.5°
```

### Секции таблицы

#### Операционная часть
```
Заголовок секции:
- Текст: "Операционная часть"
- Позиция: x=80, y=145
- Шрифт: Montserrat SemiBold 14px

Контейнер:
- Позиция: x=72, y=165
- Размер: 677×72px
- Border: 1px solid rgba(0,0,0,0.35)
- Border opacity: 0.41
- Border radius: 0 10px 10px 10px

Строки (y-координаты):
- Движение Д/С по операционной деятельности ООО: y=169 (SemiBold)
- Поступления по операционной деятельности: y=187 (Regular)
- Расходы по основной деятельности: y=203 (Regular)
- Обеспечительные платежи: y=219 (Regular)
```

#### Инвестиционная часть
```
Заголовок секции:
- Текст: "Инвестиционная часть"
- Позиция: x=80, y=262
- Шрифт: Montserrat SemiBold 14px

Контейнер:
- Позиция: x=72, y=281
- Размер: 677×57px
- Border: 1px solid rgba(0,0,0,0.35), opacity 0.41
- Border radius: 0 10px 10px 10px

Строки:
- Движение Д/С по инвестиционной деятельности: y=285 (SemiBold)
- Выплата дохода акционерам (пайщикам): y=303 (Regular)
- Расходы на капитальный ремонт: y=320 (Regular)
```

#### Финансовая часть
```
Заголовок секции:
- Текст: "Финансовая часть"
- Позиция: x=80, y=363
- Шрифт: Montserrat SemiBold 14px

Контейнер:
- Позиция: x=72, y=382
- Размер: 677×268px
- Border: 1px solid rgba(0,0,0,0.35), opacity 0.41
- Border radius: 0 10px 10px 10px

Строки:
- Движение Д/С по финансовой деятельности: y=385 (SemiBold)
- Расчеты по кредитам: y=400 (Regular)
- Прочие доходы и расходы по финансовой деятельности: y=417 (Regular, 2 строки)
- Расходы на УК Парус: y=446 (Regular)
```

#### Блок остатков по кредиту (выделенный)
```
Контейнер:
- Позиция: x=78, y=467
- Размер: 665×36px
- Фон: rgba(217,217,217,0.46)
- Border radius: 4px

Строки:
- Остаток по кредиту на начало периода: y=470 (SemiBold)
- Остаток по кредиту на конец периода: y=485 (SemiBold)
```

#### Движение за период по Д/С
```
Заголовок:
- Позиция: x=80, y=508
- Шрифт: Montserrat SemiBold 12px

Строки:
- Сформированные резервы (нарастающим итогом): y=530 (Regular)
- Накопленные резервы на ремонт, непредвиденные расходы и вакансию: y=553 (Regular, 2 строки)
```

#### Блок остатков Д/С (выделенный)
```
Контейнер:
- Позиция: x=78, y=584
- Размер: 665×59px
- Фон: rgba(217,217,217,0.46)
- Border radius: 4px

Строки:
- Остаток Д/С на начало периода: y=589 (SemiBold)
- Остаток Д/С на конец периода: y=605 (SemiBold)
- Д/С на конец периода (с учетом резерва): y=621 (SemiBold)
```

### Колонки таблицы (X-координаты)

| Колонка | X позиция | Ширина |
|---------|-----------|--------|
| Названия строк | 80px | ~360px |
| Факт '23 | 446-447px | ~60px |
| Факт '24 | 515-517px | ~60px |
| Факт/План '25 | 586-604px | ~80px |
| План '26 | 690-691px | ~60px |

### Заголовки колонок
```
Факт '23:
- Позиция: x=446, y=148
- Шрифт: Montserrat Bold 12px

Факт '24:
- Позиция: x=515, y=148
- Шрифт: Montserrat Bold 12px

Факт (I-III кв. '25) / План (IV кв. '25):
- Позиция: x=586, y=138
- Размер: 90×36px (многострочный)
- Шрифт: Montserrat Bold 10px

План '26:
- Позиция: x=690, y=148
- Шрифт: Montserrat Bold 12px
```

### Значения ячеек
```
- Шрифт заголовков секций: Montserrat SemiBold 11px
- Шрифт обычных значений: Montserrat Regular 11px
- Формат чисел: 1 366 339 (пробел как разделитель тысяч)
```

### График дивидендов (правая часть)

#### Заголовок графика
```
Текст: "Выплата дохода акционерам (пайщикам), тыс. ₽"
- Позиция: x=774, y=61
- Размер: 342×48px
- Шрифт: Montserrat Bold 20px (многострочный)
```

#### Ось Y (шкала)
```
Диапазон: 100 - 1000
Шаг: 100
Позиция X: 772-782px
Шрифт: Montserrat Regular 11px

Y-позиции меток:
- 1 000: y=173
- 900: y=220
- 800: y=267
- 700: y=320
- 600: y=367
- 500: y=414
- 400: y=456
- 300: y=496
- 200: y=536
- 100: y=579
```

#### Горизонтальные линии сетки
```
- Ширина: 303px
- X позиция: 809-810px
- Y позиции: 180, 227, 274, 327, 374, 421, 463, 503, 543, 586, 624
- Цвет: светло-серый (stroke)
```

#### Столбцы графика
```
Общие параметры:
- Ширина: 50px
- Border radius: 5px 5px 0 0 (только верх)
- Base Y: 624px

Факт '23 (Rectangle 4742):
- X: 835px
- Высота: 155px (от y=469)
- Цвет: #9DBCE0
- Значение: 390 (x=847, y=445, Bold 14px)

Факт '24 (Rectangle 4743):
- X: 897px
- Высота: 283px (от y=341)
- Цвет: #9DBCE0
- Значение: 670 (x=909, y=317, Bold 14px)

План '25 (Rectangle 4744):
- X: 959px
- Высота: 371px (от y=253)
- Цвет: #D9D9D9
- Значение: 860 (x=970, y=229, Bold 14px)

План '26 (Rectangle 4745):
- X: 1021px
- Высота: 435px (от y=189)
- Цвет: #D9D9D9
- Значение: 980 (x=1032, y=165, Bold 14px)
```

#### Подписи оси X
```
Y позиция: 630px
Шрифт: Montserrat SemiBold 11px

- Факт '23: x=836
- Факт '24: x=898
- План '25: x=960
- План '26: x=1021
```

---

### 1.2 Вариант с дельтой (14917:361)

Отличия от основного:
```
Заголовок ссылки:
- Текст: "Динамика по годам" (вместо "Детали за текущий год")
- Позиция: x=601, y=111

Колонки таблицы:
- Факт '23: x=445
- Факт/План '25: x=528
- Дельта: x=647

Формат значений с дельтой:
- "1 366 339 (10%)"
- Шрифт: Montserrat Regular 11px
- Ширина: ~82px
```

---

### 1.3 Вариант с открытым dropdown (14917:516)

Dropdown меню фондов:
```
Контейнер:
- Позиция: x=71, y=130
- Размер: 328×318px

Внутренний контейнер:
- Позиция: x=71, y=130
- Размер: 328×119px
- Фон: белый с тенью

Список фондов (Grid layout):
Строка 1 (y=187):
- ЗОЛЯ: x=90, width=45px
- КРАС: x=143, width=42px
- ЛОГ: x=193, width=33px
- ДВН: x=253, width=35px
- ТРМ: x=328, width=35px

Строка 2 (y=215):
- НОР: x=90, width=35px
- ОЗН: x=133, width=35px

Шрифт: 19px (десктоп)
Иконки: 24×24px или 22×22px
```

---

## 2. ПЛАНШЕТ (768×1283)

### Основные отличия от десктопа

```
Контейнер карточки:
- Размер: 712×601px
- Позиция: x=28, y=24

Заголовок:
- Текст: "Бюджет по фондам, ₽" (без "тыс.")
- Позиция: x=67, y=41
- Размер: 286×29px

Селектор фонда:
- Иконка: x=67, y=82, 24×24px
- Название ДВН: x=97, y=83

Ссылка:
- Позиция: x=545, y=95
```

### Секции таблицы (планшет)

```
Операционная часть:
- Заголовок: x=67, y=115
- Контейнер: x=59, y=135, 646×72px

Инвестиционная часть:
- Заголовок: x=67, y=213
- Контейнер: x=59, y=231, 646×73px
- Дополнительная строка: "НДС при переводе Актива на ЗПИФ" (y=269)

Финансовая часть:
- Заголовок: x=67, y=311
- Контейнер: x=58, y=328, 647×82px
```

### Колонки (планшет)

| Колонка | X позиция |
|---------|-----------|
| Названия | 67px |
| Факт '23 | 433-434px |
| Факт '24 | 502-504px |
| План '25 | 573-574px |
| План '26 | 642-644px |

### График дивидендов (планшет)
```
Расположение: под таблицей
Заголовок: x=85, y=666
Контейнер: x=28, y=652, 712×76px
```

---

## 3. МОБИЛЬНАЯ ВЕРСИЯ (320×1360)

### Общая структура
```
- Вертикальный layout
- Таблица сверху, график снизу
- Все секции в одну колонку
```

### Заголовок
```
Текст: "Бюджет по фондам, тыс. ₽"
- Позиция: x=19, y=31
- Размер: 228×20px
- Шрифт: уменьшенный
```

### Селектор фонда (мобильный)
```
Иконка:
- Позиция: x=20, y=65
- Размер: 16×16px

Название ДВН:
- Позиция: x=41, y=64
- Размер: 36×18px

Стрелка:
- Позиция: x=82, y=65
- Размер: 16×16px
```

### Секции таблицы (мобильный)

```
Операционная часть:
- Заголовок: x=20, y=103, 137×15px
- Маркер секции: x=13, y=100, 169×21px (vector)

Строки операционной части:
- "Движение Д/С по операционной деятельности ООО": x=13, y=138, многострочный (164×33px)
- "Обеспечительные платежи": x=12, y=179
- "Поступления по операционной деятельности": x=12, y=207, многострочный
- "Расходы по основной деятельности": x=12, y=245, многострочный

Инвестиционная часть:
- Заголовок: x=20, y=303
- Маркер секции: x=13, y=300, 188×21px

Финансовая часть:
- Заголовок: x=20, y=464
- Маркер секции: x=13, y=461, 150×21px
```

### Колонки (мобильный)

| Колонка | X позиция | Ширина |
|---------|-----------|--------|
| Факт '23 | 118px | ~39px |
| Факт '24 | 166px | ~37px |
| План '25 | 215-217px | ~37px |
| План '26 | 267-268px | ~37px |

### Значения (мобильный)
```
Шрифт: 10px (уменьшенный)
Формат: "1 366 339"
Ширина ячейки: 37-39px
```

### Блок остатков по кредиту (мобильный)
```
Контейнер:
- Позиция: x=12, y=647
- Размер: 298×59px
- Фон: выделенный
```

### График дивидендов (мобильный)

```
Заголовок:
- Позиция: x=24, y=961
- Текст: "Выплата дохода акционерам (пайщикам), тыс. ₽"

Область графика:
- Начало: y=1000
- Конец: y=1360

Ось Y:
- Диапазон: 100-1000
- X позиция: 24-31px
- Y позиции меток: 1013, 1045, 1076, 1112, 1143, 1175, 1203, 1230, 1256, 1285

Линии сетки:
- X: 57px
- Ширина: 233px
- Y позиции: 1018, 1050, 1081, 1116, 1148, 1179, 1207, 1234, 1261, 1290, 1315

Столбцы:
- Факт '23: x=87, width=33px, height=103px (от y=1212)
- Факт '24: x=128, width=34px, height=189px (от y=1126)
- План '25: x=170, width=33px, height=248px (от y=1067)
- План '26: x=211, width=34px, height=291px (от y=1024)

Подписи оси X:
- Y: 1319px
- Факт '23: x=86, 35×9px
- Факт '24: x=128, 36×9px
- План '25: x=169, 40×9px
- План '26: x=211, 37×9px

Значения над столбцами:
- 390: x=93, y=1195, 12px
- 670: x=135, y=1110, 11px
- 860: x=177, y=1051, 11px
- 980: x=218, y=1007, 11px
```

---

## 4. ТИПОГРАФИКА

### Шрифт
```
Семейство: Montserrat
Google Fonts: https://fonts.google.com/specimen/Montserrat

Начертания:
- Regular (400)
- SemiBold (600)
- Bold (700)
```

### Размеры по платформам

| Элемент | Desktop | Tablet | Mobile |
|---------|---------|--------|--------|
| Главный заголовок | 24px Bold | 24px Bold | ~16px Bold |
| Заголовок графика | 20px Bold | 20px Bold | ~14px Bold |
| Название фонда | 20px Regular | 20px Regular | 18px Regular |
| Заголовок секции | 14px SemiBold | 14px SemiBold | ~12px SemiBold |
| Заголовок строки | 12px SemiBold | 12px SemiBold | ~10px SemiBold |
| Обычная строка | 12px Regular | 12px Regular | ~10px Regular |
| Значения ячеек | 11px | 11px | 10px |
| Заголовки колонок | 12px Bold | 12px Bold | 10px Bold |
| Подписи графика | 11px | 11px | 9px |
| Значения графика | 14px Bold | 14px Bold | 11-12px Bold |

---

## 5. ЦВЕТОВАЯ ПАЛИТРА

| Название | HEX | RGB | Применение |
|----------|-----|-----|------------|
| Чёрный | #000000 | 0, 0, 0 | Основной текст |
| Primary Blue | #9DBCE0 | 157, 188, 224 | Столбцы факта, иконки |
| Light Gray | #D9D9D9 | 217, 217, 217 | Столбцы плана |
| Highlight BG | rgba(217,217,217,0.46) | - | Выделенные блоки |
| Border | rgba(0,0,0,0.35) | - | Рамки секций |
| Border Opacity | 0.41 | - | Прозрачность рамок |
| White | #FFFFFF | 255, 255, 255 | Фон |
| Line Separator | rgba(0,0,0,0.1) | - | Разделители строк |

---

## 6. СПИСОК ФОНДОВ

Доступные фонды в dropdown:
```
- ДВН (основной в примерах)
- ЗОЛЯ
- КРАС
- ЛОГ
- НОР
- ОЗН
- ТРМ
```

---

## 7. ИНТЕРАКТИВНЫЕ ЭЛЕМЕНТЫ

### Селектор фонда
```
Состояния:
- Закрыт: показывает текущий выбор + стрелка вниз
- Открыт: dropdown с сеткой фондов

Взаимодействие:
- Клик открывает/закрывает dropdown
- Выбор фонда обновляет данные
```

### Ссылка "Детали за текущий год"
```
Состояния:
- Default: underline
- Hover: (не определено в макете)

Действие: переход к детализации
```

### Переключение вида
```
"Детали за текущий год" ↔ "Динамика по годам"
- Меняет набор колонок
- Добавляет/убирает колонку Дельта
```

---

## 8. РАЗДЕЛИТЕЛИ СТРОК

### Горизонтальные линии в таблице
```
Десктоп:
- Ширина: 660-664px
- X позиция: 80-81px
- Stroke: 1px
- Цвет: rgba(0,0,0,0.1)

Y-позиции линий (операционная часть):
- y=188
- y=203
- y=219

Y-позиции линий (инвестиционная часть):
- y=303
- y=319

Y-позиции линий (финансовая часть):
- y=401
- y=417
- y=443

Y-позиции линий (движение за период):
- y=527
- y=550
```

---

## 9. ДАННЫЕ ДЛЯ ПРИМЕРА

### Значения в макете
```
Типичное значение: 1 366 339
Меньшее значение: 1 366
Сумма расходов: 136 633

Дивиденды:
- Факт '23: 390
- Факт '24: 670
- План '25: 860
- План '26: 980

Дельта: 10% (в варианте с дельтой)
```

---

## 10. BREAKPOINTS

| Устройство | Ширина | Высота |
|------------|--------|--------|
| Desktop | 1280px | 720px |
| Tablet | 768px | 1283px |
| Mobile | 320px | 1360px |

### Адаптивное поведение

**Desktop → Tablet:**
- Таблица и график располагаются вертикально
- График уходит под таблицу
- Уменьшается ширина контейнера

**Tablet → Mobile:**
- Ещё более компактный layout
- Уменьшаются размеры шрифтов
- Столбцы графика уже (33-34px вместо 50px)
- Все элементы в одну колонку

---

## 11. ИКОНКИ И АССЕТЫ

### Необходимые SVG иконки
1. **icon_office** - здание/офис (24×24, 16×16 для mobile)
2. **dropdown_arrow** - стрелка вниз (22×22, 16×16 для mobile)
3. **link_arrow** - стрелка для ссылки (8×8)
4. **icon_warehouse** - склад (22×22) - для dropdown

### Декоративные элементы
```
Polygon 32, Polygon 33 - декоративные треугольники (не обязательны для MVP)
```

---

## 12. СТРУКТУРА КОМПОНЕНТОВ

```
BudgetReport/
├── index.tsx                    # Главный компонент
├── BudgetReport.module.css      # Стили
├── types.ts                     # TypeScript интерфейсы
│
├── components/
│   ├── Header/
│   │   ├── Header.tsx          # Заголовок + селектор фонда
│   │   └── FundSelector.tsx    # Dropdown выбора фонда
│   │
│   ├── Table/
│   │   ├── BudgetTable.tsx     # Контейнер таблицы
│   │   ├── TableSection.tsx    # Секция (операционная/инвестиционная/финансовая)
│   │   ├── TableRow.tsx        # Строка таблицы
│   │   ├── TableHeader.tsx     # Заголовки колонок
│   │   └── HighlightBlock.tsx  # Выделенный блок
│   │
│   └── Chart/
│       ├── DividendChart.tsx   # Контейнер графика
│       ├── ChartBar.tsx        # Столбец графика
│       ├── ChartAxis.tsx       # Оси и сетка
│       └── ChartLegend.tsx     # Подписи
│
└── utils/
    └── formatNumber.ts         # Форматирование чисел
```

---

## 13. TypeScript ИНТЕРФЕЙСЫ

```typescript
interface BudgetReport {
  fund: Fund;
  periods: Period[];
  sections: {
    operation: BudgetSection;
    investment: BudgetSection;
    finance: BudgetSection;
  };
  creditBalance: BalanceBlock;
  cashMovement: BudgetSection;
  cashBalance: BalanceBlock;
  dividends: DividendData[];
  viewMode: 'details' | 'dynamics';
}

interface Fund {
  id: string;
  name: string; // ДВН, ЗОЛЯ, КРАС и т.д.
  icon: string;
}

interface Period {
  id: string;
  label: string; // "Факт '23", "План '26"
  shortLabel: string; // "'23", "'26"
  type: 'fact' | 'plan' | 'mixed';
  year: number;
  quarters?: number[]; // [1,2,3] для "Факт (I-III кв. '25)"
}

interface BudgetSection {
  id: string;
  title: string;
  type: 'operation' | 'investment' | 'finance' | 'movement';
  rows: BudgetRow[];
}

interface BudgetRow {
  id: string;
  label: string;
  isHeader: boolean;
  isMultiline?: boolean;
  values: Record<string, CellValue>; // periodId -> value
}

interface CellValue {
  amount: number;
  delta?: number; // процент изменения
  formatted: string; // "1 366 339" или "1 366 339 (10%)"
}

interface BalanceBlock {
  title?: string;
  rows: BudgetRow[];
  highlighted: boolean;
}

interface DividendData {
  periodId: string;
  label: string;
  value: number;
  type: 'fact' | 'plan';
  color: string; // #9DBCE0 или #D9D9D9
}
```

---

## 14. ФОРМАТИРОВАНИЕ ЧИСЕЛ

```typescript
// Основной формат: 1 366 339
function formatNumber(value: number): string {
  return new Intl.NumberFormat('ru-RU', {
    useGrouping: true,
  }).format(value).replace(/\s/g, ' '); // неразрывный пробел
}

// С дельтой: 1 366 339 (10%)
function formatWithDelta(value: number, delta: number): string {
  return `${formatNumber(value)} (${delta}%)`;
}

// Краткий формат для графика: 390, 670, 860, 980
function formatShort(value: number): string {
  return value.toString();
}
```

---

## 15. ЗАМЕТКИ ДЛЯ РАЗРАБОТКИ

1. **Шрифты**: Подключить Montserrat с весами 400, 600, 700
2. **Responsive**: Использовать CSS Grid/Flexbox для адаптивности
3. **Таблица**: Семантический HTML с `<table>`, `<thead>`, `<tbody>`
4. **График**: Recharts или кастомный SVG
5. **Accessibility**: ARIA-labels для интерактивных элементов
6. **Тестирование**: Проверить на всех breakpoints
7. **Планшетные версии**: Помечены как hidden - возможно WIP
