# BDDS Dashboard (React)

Финансовый дашборд БДДС (Бюджет Движения Денежных Средств).

## Запуск

```bash
cd react
npm install
npm run dev      # Dev-сервер http://localhost:5173
npm run build    # Сборка в dist/
npm run test:run # Запуск тестов
```

## Ручное тестирование через консоль браузера

Откройте консоль браузера (F12) и используйте глобальный объект `window.BDDS`.

### API методы

```javascript
// Получить текущее состояние
BDDS.Dashboard.getState()
// { currentFund: "ДВН", viewMode: "dynamics", periodData: [...] }

// Сменить фонд
BDDS.Dashboard.handleFundChange("ЗОЛЯ")

// Сменить режим просмотра
BDDS.Dashboard.handleViewModeChange("details")  // все периоды
BDDS.Dashboard.handleViewModeChange("dynamics") // первый, последний, дельта

// Загрузить новые данные
BDDS.Dashboard.loadData(data)

// Получить список фондов
BDDS.FundsService.getFundsList()
// ["ДВН", "ЗОЛЯ", "КРАС", "ТРМ"]

// Получить данные по фонду
BDDS.FundsService.getDashboardData("ДВН")
```

### Тестовые данные

#### Минимальный набор (1 фонд, 2 периода)

```javascript
BDDS.Dashboard.loadData({
  currentFund: "Тест",
  viewMode: "dynamics",
  funds: {
    "Тест": {
      type: "building",
      periods: {
        "Факт '23": {
          "Движение Д/С по операционной деятельности ООО": 100,
          "Поступления по операционной деятельности": 500,
          "Расходы по основной деятельности": -200,
          "Обеспечительные платежи": 50,
          "Движение Д/С по инвестиционной деятельности": -80,
          "Выплата дохода акционерам (пайщикам)": -150,
          "Доходы от доп.выпуска паев": 30,
          "Расходы на капитальный ремонт": 40,
          "Движение Д/С по финансовой деятельности": -60,
          "Расчеты по кредитам": 100,
          "Прочие доходы и расходы по финансовой деятельности": 10,
          "Расходы на УК Парус": -20,
          "Остаток по кредиту на начало периода": 500,
          "Остаток по кредиту на конец периода": -300,
          "Движение за период по Д/С": 70,
          "Сформированные резервы (нарастающим итогом)": 80,
          "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -50,
          "Остаток Д/С на начало периода": 1000,
          "Остаток Д/С на конец периода": 1200,
          "Д/С на конец периода (с учетом резерва)": 1150
        },
        "План '26": {
          "Движение Д/С по операционной деятельности ООО": 150,
          "Поступления по операционной деятельности": 700,
          "Расходы по основной деятельности": -250,
          "Обеспечительные платежи": 70,
          "Движение Д/С по инвестиционной деятельности": -100,
          "Выплата дохода акционерам (пайщикам)": -200,
          "Доходы от доп.выпуска паев": 50,
          "Расходы на капитальный ремонт": 60,
          "Движение Д/С по финансовой деятельности": -80,
          "Расчеты по кредитам": 150,
          "Прочие доходы и расходы по финансовой деятельности": 15,
          "Расходы на УК Парус": -30,
          "Остаток по кредиту на начало периода": 600,
          "Остаток по кредиту на конец периода": -400,
          "Движение за период по Д/С": 90,
          "Сформированные резервы (нарастающим итогом)": 100,
          "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -60,
          "Остаток Д/С на начало периода": 1200,
          "Остаток Д/С на конец периода": 1500,
          "Д/С на конец периода (с учетом резерва)": 1440
        }
      }
    }
  }
})
```

#### Несколько фондов разных типов

```javascript
BDDS.Dashboard.loadData({
  currentFund: "Офис-1",
  viewMode: "details",
  funds: {
    "Офис-1": {
      type: "building",  // синяя иконка здания
      periods: {
        "Факт '23": { "Движение Д/С по операционной деятельности ООО": 100, "Поступления по операционной деятельности": 200, "Расходы по основной деятельности": -50, "Обеспечительные платежи": 10, "Движение Д/С по инвестиционной деятельности": -30, "Выплата дохода акционерам (пайщикам)": -80, "Доходы от доп.выпуска паев": 15, "Расходы на капитальный ремонт": 20, "Движение Д/С по финансовой деятельности": -25, "Расчеты по кредитам": 50, "Прочие доходы и расходы по финансовой деятельности": 5, "Расходы на УК Парус": -10, "Остаток по кредиту на начало периода": 200, "Остаток по кредиту на конец периода": -150, "Движение за период по Д/С": 30, "Сформированные резервы (нарастающим итогом)": 40, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -20, "Остаток Д/С на начало периода": 500, "Остаток Д/С на конец периода": 600, "Д/С на конец периода (с учетом резерва)": 580 },
        "Факт '24": { "Движение Д/С по операционной деятельности ООО": 120, "Поступления по операционной деятельности": 250, "Расходы по основной деятельности": -60, "Обеспечительные платежи": 15, "Движение Д/С по инвестиционной деятельности": -35, "Выплата дохода акционерам (пайщикам)": -100, "Доходы от доп.выпуска паев": 20, "Расходы на капитальный ремонт": 25, "Движение Д/С по финансовой деятельности": -30, "Расчеты по кредитам": 60, "Прочие доходы и расходы по финансовой деятельности": 7, "Расходы на УК Парус": -12, "Остаток по кредиту на начало периода": 220, "Остаток по кредиту на конец периода": -170, "Движение за период по Д/С": 35, "Сформированные резервы (нарастающим итогом)": 50, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -25, "Остаток Д/С на начало периода": 600, "Остаток Д/С на конец периода": 720, "Д/С на конец периода (с учетом резерва)": 695 },
        "План '25": { "Движение Д/С по операционной деятельности ООО": 140, "Поступления по операционной деятельности": 300, "Расходы по основной деятельности": -70, "Обеспечительные платежи": 20, "Движение Д/С по инвестиционной деятельности": -40, "Выплата дохода акционерам (пайщикам)": -120, "Доходы от доп.выпуска паев": 25, "Расходы на капитальный ремонт": 30, "Движение Д/С по финансовой деятельности": -35, "Расчеты по кредитам": 70, "Прочие доходы и расходы по финансовой деятельности": 10, "Расходы на УК Парус": -15, "Остаток по кредиту на начало периода": 250, "Остаток по кредиту на конец периода": -200, "Движение за период по Д/С": 40, "Сформированные резервы (нарастающим итогом)": 60, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -30, "Остаток Д/С на начало периода": 720, "Остаток Д/С на конец периода": 850, "Д/С на конец периода (с учетом резерва)": 820 }
      }
    },
    "Склад-А": {
      type: "warehouse",  // зеленая иконка склада
      periods: {
        "Факт '23": { "Движение Д/С по операционной деятельности ООО": 80, "Поступления по операционной деятельности": 150, "Расходы по основной деятельности": -40, "Обеспечительные платежи": 8, "Движение Д/С по инвестиционной деятельности": -20, "Выплата дохода акционерам (пайщикам)": -60, "Доходы от доп.выпуска паев": 10, "Расходы на капитальный ремонт": 15, "Движение Д/С по финансовой деятельности": -18, "Расчеты по кредитам": 35, "Прочие доходы и расходы по финансовой деятельности": 3, "Расходы на УК Парус": -7, "Остаток по кредиту на начало периода": 150, "Остаток по кредиту на конец периода": -100, "Движение за период по Д/С": 22, "Сформированные резервы (нарастающим итогом)": 28, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -15, "Остаток Д/С на начало периода": 350, "Остаток Д/С на конец периода": 420, "Д/С на конец периода (с учетом резерва)": 405 },
        "План '25": { "Движение Д/С по операционной деятельности ООО": 100, "Поступления по операционной деятельности": 180, "Расходы по основной деятельности": -50, "Обеспечительные платежи": 12, "Движение Д/С по инвестиционной деятельности": -25, "Выплата дохода акционерам (пайщикам)": -80, "Доходы от доп.выпуска паев": 15, "Расходы на капитальный ремонт": 20, "Движение Д/С по финансовой деятельности": -22, "Расчеты по кредитам": 45, "Прочие доходы и расходы по финансовой деятельности": 5, "Расходы на УК Парус": -10, "Остаток по кредиту на начало периода": 180, "Остаток по кредиту на конец периода": -130, "Движение за период по Д/С": 28, "Сформированные резервы (нарастающим итогом)": 38, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -20, "Остаток Д/С на начало периода": 420, "Остаток Д/С на конец периода": 520, "Д/С на конец периода (с учетом резерва)": 500 }
      }
    },
    "Портфель": {
      type: "briefcase",  // розовая иконка портфеля
      periods: {
        "Факт '24": { "Движение Д/С по операционной деятельности ООО": 200, "Поступления по операционной деятельности": 400, "Расходы по основной деятельности": -100, "Обеспечительные платежи": 25, "Движение Д/С по инвестиционной деятельности": -50, "Выплата дохода акционерам (пайщикам)": -150, "Доходы от доп.выпуска паев": 30, "Расходы на капитальный ремонт": 40, "Движение Д/С по финансовой деятельности": -45, "Расчеты по кредитам": 90, "Прочие доходы и расходы по финансовой деятельности": 12, "Расходы на УК Парус": -18, "Остаток по кредиту на начало периода": 350, "Остаток по кредиту на конец периода": -280, "Движение за период по Д/С": 55, "Сформированные резервы (нарастающим итогом)": 70, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -35, "Остаток Д/С на начало периода": 900, "Остаток Д/С на конец периода": 1100, "Д/С на конец периода (с учетом резерва)": 1065 },
        "План '26": { "Движение Д/С по операционной деятельности ООО": 250, "Поступления по операционной деятельности": 500, "Расходы по основной деятельности": -120, "Обеспечительные платежи": 35, "Движение Д/С по инвестиционной деятельности": -60, "Выплата дохода акционерам (пайщикам)": -200, "Доходы от доп.выпуска паев": 40, "Расходы на капитальный ремонт": 50, "Движение Д/С по финансовой деятельности": -55, "Расчеты по кредитам": 110, "Прочие доходы и расходы по финансовой деятельности": 18, "Расходы на УК Парус": -25, "Остаток по кредиту на начало периода": 400, "Остаток по кредиту на конец периода": -350, "Движение за период по Д/С": 70, "Сформированные резервы (нарастающим итогом)": 90, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -45, "Остаток Д/С на начало периода": 1100, "Остаток Д/С на конец периода": 1400, "Д/С на конец периода (с учетом резерва)": 1355 }
      }
    }
  }
})
```

#### Тест с null значениями (прочерки)

```javascript
BDDS.Dashboard.loadData({
  currentFund: "Пустой",
  viewMode: "dynamics",
  funds: {
    "Пустой": {
      type: "building",
      periods: {
        "Факт '24": {
          "Движение Д/С по операционной деятельности ООО": 100,
          "Поступления по операционной деятельности": null,
          "Расходы по основной деятельности": -50,
          "Обеспечительные платежи": null,
          "Движение Д/С по инвестиционной деятельности": -30,
          "Выплата дохода акционерам (пайщикам)": -80,
          "Доходы от доп.выпуска паев": null,
          "Расходы на капитальный ремонт": 20,
          "Движение Д/С по финансовой деятельности": null,
          "Расчеты по кредитам": 50,
          "Прочие доходы и расходы по финансовой деятельности": 5,
          "Расходы на УК Парус": -10,
          "Остаток по кредиту на начало периода": 200,
          "Остаток по кредиту на конец периода": null,
          "Движение за период по Д/С": 30,
          "Сформированные резервы (нарастающим итогом)": null,
          "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -20,
          "Остаток Д/С на начало периода": 500,
          "Остаток Д/С на конец периода": 600,
          "Д/С на конец периода (с учетом резерва)": null
        },
        "План '25": {
          "Движение Д/С по операционной деятельности ООО": 150,
          "Поступления по операционной деятельности": 300,
          "Расходы по основной деятельности": -70,
          "Обеспечительные платежи": 20,
          "Движение Д/С по инвестиционной деятельности": -40,
          "Выплата дохода акционерам (пайщикам)": -100,
          "Доходы от доп.выпуска паев": 25,
          "Расходы на капитальный ремонт": 30,
          "Движение Д/С по финансовой деятельности": -35,
          "Расчеты по кредитам": 70,
          "Прочие доходы и расходы по финансовой деятельности": 10,
          "Расходы на УК Парус": -15,
          "Остаток по кредиту на начало периода": 250,
          "Остаток по кредиту на конец периода": -200,
          "Движение за период по Д/С": 40,
          "Сформированные резервы (нарастающим итогом)": 60,
          "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -30,
          "Остаток Д/С на начало периода": 600,
          "Остаток Д/С на конец периода": 750,
          "Д/С на конец периода (с учетом резерва)": 720
        }
      }
    }
  }
})
```

#### Тест смешанного периода (Факт + План)

```javascript
BDDS.Dashboard.loadData({
  currentFund: "Смешанный",
  viewMode: "details",
  funds: {
    "Смешанный": {
      type: "warehouse",
      periods: {
        "Факт '23": { "Движение Д/С по операционной деятельности ООО": 100, "Поступления по операционной деятельности": 200, "Расходы по основной деятельности": -50, "Обеспечительные платежи": 10, "Движение Д/С по инвестиционной деятельности": -30, "Выплата дохода акционерам (пайщикам)": -80, "Доходы от доп.выпуска паев": 15, "Расходы на капитальный ремонт": 20, "Движение Д/С по финансовой деятельности": -25, "Расчеты по кредитам": 50, "Прочие доходы и расходы по финансовой деятельности": 5, "Расходы на УК Парус": -10, "Остаток по кредиту на начало периода": 200, "Остаток по кредиту на конец периода": -150, "Движение за период по Д/С": 30, "Сформированные резервы (нарастающим итогом)": 40, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -20, "Остаток Д/С на начало периода": 500, "Остаток Д/С на конец периода": 600, "Д/С на конец периода (с учетом резерва)": 580 },
        "Факт (I-III кв. '24)\nПлан (IV кв. '24)": { "Движение Д/С по операционной деятельности ООО": 130, "Поступления по операционной деятельности": 280, "Расходы по основной деятельности": -65, "Обеспечительные платежи": 18, "Движение Д/С по инвестиционной деятельности": -38, "Выплата дохода акционерам (пайщикам)": -110, "Доходы от доп.выпуска паев": 22, "Расходы на капитальный ремонт": 28, "Движение Д/С по финансовой деятельности": -32, "Расчеты по кредитам": 65, "Прочие доходы и расходы по финансовой деятельности": 8, "Расходы на УК Парус": -14, "Остаток по кредиту на начало периода": 240, "Остаток по кредиту на конец периода": -185, "Движение за период по Д/С": 38, "Сформированные резервы (нарастающим итогом)": 55, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -28, "Остаток Д/С на начало периода": 680, "Остаток Д/С на конец периода": 800, "Д/С на конец периода (с учетом резерва)": 772 },
        "План '25": { "Движение Д/С по операционной деятельности ООО": 160, "Поступления по операционной деятельности": 350, "Расходы по основной деятельности": -80, "Обеспечительные платежи": 25, "Движение Д/С по инвестиционной деятельности": -45, "Выплата дохода акционерам (пайщикам)": -140, "Доходы от доп.выпуска паев": 30, "Расходы на капитальный ремонт": 35, "Движение Д/С по финансовой деятельности": -40, "Расчеты по кредитам": 80, "Прочие доходы и расходы по финансовой деятельности": 12, "Расходы на УК Парус": -18, "Остаток по кредиту на начало периода": 280, "Остаток по кредиту на конец периода": -220, "Движение за период по Д/С": 45, "Сформированные резервы (нарастающим итогом)": 70, "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -35, "Остаток Д/С на начало периода": 800, "Остаток Д/С на конец периода": 950, "Д/С на конец периода (с учетом резерва)": 915 }
      }
    }
  }
})
```

### processRawData — адаптер данных бэкенда

Функция `BDDS.processRawData()` преобразует данные из формата бэкенда в формат дашборда.
Вызывается автоматически в `Dashboard.loadData()`, но можно вызвать вручную для проверки.

#### Проверка работы processRawData

```javascript
// 1. Проверить преобразование вручную (без загрузки в дашборд)
const result = BDDS.processRawData(myData)
console.log(result)
// Должен вернуть: { funds: {...}, currentFund?: "...", viewMode?: "..." }

// 2. Проверить что данные уже в нужном формате (passthrough)
const result = BDDS.processRawData({ funds: { "Тест": { type: "building", periods: {} } } })
console.log(result.funds["Тест"])
// { type: "building", periods: {} }
```

#### Тест: данные уже в формате дашборда (passthrough)

```javascript
// Если данные уже в формате { funds: {...} } — возвращаются как есть
const dashboardFormat = {
  funds: {
    "МойФонд": {
      type: "building",
      periods: {
        "Факт '24": { "Поступления по операционной деятельности": 100 }
      }
    }
  }
}

const result = BDDS.processRawData(dashboardFormat)
console.log(result === dashboardFormat) // true (тот же объект)
console.log(Object.keys(result.funds))  // ["МойФонд"]
```

#### Тест: массив объектов от бэкенда

```javascript
// Бэкенд отдаёт массив — преобразуется в формат дашборда
const backendArray = [
  {
    name: "Фонд-1",           // или fund_name, или fund
    type: "building",          // или category
    periods: {
      "Факт '24": {
        "Поступления по операционной деятельности": 500,
        "Расходы по основной деятельности": -200
      }
    }
  },
  {
    fund_name: "Фонд-2",       // альтернативное имя поля
    category: "warehouse",     // альтернатива для type
    data: {                    // альтернатива для periods
      "План '25": {
        "Поступления по операционной деятельности": 700
      }
    }
  }
]

const result = BDDS.processRawData(backendArray)
console.log(Object.keys(result.funds))  // ["Фонд-1", "Фонд-2"]
console.log(result.funds["Фонд-1"].type) // "building"
console.log(result.funds["Фонд-2"].type) // "warehouse"

// Загрузить в дашборд
BDDS.Dashboard.loadData(backendArray)
```

#### Тест: полный массив с данными

```javascript
// Полный тест с реальными метриками
BDDS.Dashboard.loadData([
  {
    name: "Офис-Центр",
    type: "building",
    periods: {
      "Факт '23": {
        "Движение Д/С по операционной деятельности ООО": 100,
        "Поступления по операционной деятельности": 500,
        "Расходы по основной деятельности": -200,
        "Обеспечительные платежи": 50,
        "Движение Д/С по инвестиционной деятельности": -80,
        "Выплата дохода акционерам (пайщикам)": -150,
        "Доходы от доп.выпуска паев": 30,
        "Расходы на капитальный ремонт": 40,
        "Движение Д/С по финансовой деятельности": -60,
        "Расчеты по кредитам": 100,
        "Прочие доходы и расходы по финансовой деятельности": 10,
        "Расходы на УК Парус": -20,
        "Остаток по кредиту на начало периода": 500,
        "Остаток по кредиту на конец периода": -300,
        "Движение за период по Д/С": 70,
        "Сформированные резервы (нарастающим итогом)": 80,
        "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -50,
        "Остаток Д/С на начало периода": 1000,
        "Остаток Д/С на конец периода": 1200,
        "Д/С на конец периода (с учетом резерва)": 1150
      },
      "План '25": {
        "Движение Д/С по операционной деятельности ООО": 150,
        "Поступления по операционной деятельности": 700,
        "Расходы по основной деятельности": -250,
        "Обеспечительные платежи": 70,
        "Движение Д/С по инвестиционной деятельности": -100,
        "Выплата дохода акционерам (пайщикам)": -200,
        "Доходы от доп.выпуска паев": 50,
        "Расходы на капитальный ремонт": 60,
        "Движение Д/С по финансовой деятельности": -80,
        "Расчеты по кредитам": 150,
        "Прочие доходы и расходы по финансовой деятельности": 15,
        "Расходы на УК Парус": -30,
        "Остаток по кредиту на начало периода": 600,
        "Остаток по кредиту на конец периода": -400,
        "Движение за период по Д/С": 90,
        "Сформированные резервы (нарастающим итогом)": 100,
        "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -60,
        "Остаток Д/С на начало периода": 1200,
        "Остаток Д/С на конец периода": 1500,
        "Д/С на конец периода (с учетом резерва)": 1440
      }
    }
  },
  {
    name: "Склад-Юг",
    type: "warehouse",
    periods: {
      "Факт '24": {
        "Движение Д/С по операционной деятельности ООО": 80,
        "Поступления по операционной деятельности": 300,
        "Расходы по основной деятельности": -120,
        "Обеспечительные платежи": 30,
        "Движение Д/С по инвестиционной деятельности": -50,
        "Выплата дохода акционерам (пайщикам)": -100,
        "Доходы от доп.выпуска паев": 20,
        "Расходы на капитальный ремонт": 25,
        "Движение Д/С по финансовой деятельности": -40,
        "Расчеты по кредитам": 70,
        "Прочие доходы и расходы по финансовой деятельности": 8,
        "Расходы на УК Парус": -15,
        "Остаток по кредиту на начало периода": 350,
        "Остаток по кредиту на конец периода": -200,
        "Движение за период по Д/С": 50,
        "Сформированные резервы (нарастающим итогом)": 60,
        "Накопленные резервы на ремонт, непредвиденные расходы и вакансию": -35,
        "Остаток Д/С на начало периода": 700,
        "Остаток Д/С на конец периода": 850,
        "Д/С на конец периода (с учетом резерва)": 815
      }
    }
  }
])
```

#### Тест: неизвестный формат

```javascript
// Неизвестный формат — вернёт пустой объект и предупреждение в консоли
const result = BDDS.processRawData("invalid data")
console.log(result) // { funds: {} }
// В консоли: "processRawData: неизвестный формат данных invalid data"

const result2 = BDDS.processRawData(null)
console.log(result2) // { funds: {} }

const result3 = BDDS.processRawData(12345)
console.log(result3) // { funds: {} }
```

#### Поддерживаемые форматы входных данных

| Формат | Описание | Пример |
|--------|----------|--------|
| `{ funds: {...} }` | Уже в формате дашборда | Возвращается как есть |
| `[{name, type, periods}, ...]` | Массив фондов | Преобразуется |
| `[{fund_name, category, data}, ...]` | Альтернативные имена полей | Преобразуется |
| Другое | Неизвестный формат | `{ funds: {} }` + warning |

#### Альтернативные имена полей

Функция поддерживает разные имена полей от бэкенда:

| Поле дашборда | Альтернативы бэкенда |
|---------------|---------------------|
| Имя фонда | `name`, `fund_name`, `fund` |
| Тип фонда | `type`, `category` |
| Периоды | `periods`, `data` |

#### Как адаптировать под свой бэкенд

Если формат вашего бэкенда отличается, отредактируйте файл:
`src/utils/processRawData.ts`

```typescript
export function processRawData(rawData: unknown): DashboardData {
  // Добавьте свою логику преобразования здесь

  // Например, если бэкенд возвращает:
  // { items: [{ fundCode: "ABC", metrics: {...} }] }

  if (rawData && typeof rawData === 'object' && 'items' in rawData) {
    const funds: DashboardData['funds'] = {}
    ;(rawData as { items: Array<{ fundCode: string; metrics: Record<string, number> }> }).items.forEach(item => {
      funds[item.fundCode] = {
        type: 'building',
        periods: { "Данные": item.metrics }
      }
    })
    return { funds }
  }

  // ... остальная логика
}
```

### Чек-лист ручной проверки

#### Строки таблицы (всего 20)

**Операционная часть (4 строки):**
- [ ] Движение Д/С по операционной деятельности ООО (жирный)
- [ ] Поступления по операционной деятельности
- [ ] Расходы по основной деятельности
- [ ] Обеспечительные платежи

**Инвестиционная часть (4 строки):**
- [ ] Движение Д/С по инвестиционной деятельности (жирный)
- [ ] Выплата дохода акционерам (пайщикам)
- [ ] Доходы от доп.выпуска паев
- [ ] Расходы на капитальный ремонт

**Финансовая часть (4 строки):**
- [ ] Движение Д/С по финансовой деятельности (жирный)
- [ ] Расчеты по кредитам
- [ ] Прочие доходы и расходы по финансовой деятельности
- [ ] Расходы на УК Парус

**Остатки по кредиту (2 строки, выделенный блок):**
- [ ] Остаток по кредиту на начало периода (жирный)
- [ ] Остаток по кредиту на конец периода (жирный)

**Движение Д/С (3 строки):**
- [ ] Движение за период по Д/С (жирный)
- [ ] Сформированные резервы (нарастающим итогом)
- [ ] Накопленные резервы на ремонт, непредвиденные расходы и вакансию

**Остатки Д/С (3 строки, выделенный блок):**
- [ ] Остаток Д/С на начало периода (жирный)
- [ ] Остаток Д/С на конец периода (жирный)
- [ ] Д/С на конец периода (с учетом резерва) (жирный)

#### Функциональность

- [ ] Переключение фондов в выпадающем списке
- [ ] Переключение режимов "Детали" / "Динамика"
- [ ] График показывает "Выплата дохода акционерам"
- [ ] Цвета меняются по типу фонда (синий/зеленый/розовый)
- [ ] Отрицательные числа отображаются корректно
- [ ] null отображается как "-"
- [ ] Дельта показывает процент изменения

## Типы фондов

| Тип | type | Цвет | Иконка |
|-----|------|------|--------|
| Здание | `building` | Синий (#9DBCE0) | Многоэтажка |
| Склад | `warehouse` | Зеленый (#A9DB21) | Ангар |
| Портфель | `briefcase` | Розовый (#C7A4C0) | Портфель |

## Структура данных

```typescript
interface DashboardData {
  currentFund?: string       // Активный фонд при загрузке
  viewMode?: 'details' | 'dynamics'  // Режим просмотра
  funds: {
    [fundName: string]: {
      type: 'building' | 'warehouse' | 'briefcase'
      periods: {
        [periodName: string]: {
          [metricKey: string]: number | null
        }
      }
    }
  }
}
```

## Тесты

```bash
npm run test:run  # Запуск всех тестов (89 тестов)
```

Покрытие:
- `sections.test.ts` - конфигурация секций (26 тестов)
- `formatNumber.test.ts` - форматирование чисел
- `calculateDelta.test.ts` - расчет дельты
- `parsePeriodInfo.test.ts` - парсинг периодов
- `processRawData.test.ts` - обработка данных
- `DashboardStore.test.ts` - хранилище
- `ViewToggle.test.tsx` - компонент переключателя
- `FundSelector.test.tsx` - компонент выбора фонда
