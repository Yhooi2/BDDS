<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="БДДС - Бюджет движения денежных средств по фондам">
  <title>БДДС - Бюджет по фондам</title>

  <!-- Google Fonts: Montserrat -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <main class="dashboard">
    <article class="card" role="region" aria-label="Бюджет по фондам">

      <!-- Header -->
      <header class="header">
        <div class="header__left">
          <h1 class="header__title">Бюджет по фондам, тыс. &#8381;</h1>

          <!-- Fund Selector -->
          <div class="fund-selector" id="fundSelector" aria-expanded="false">
            <button class="fund-selector__trigger" aria-haspopup="listbox" aria-label="Выбрать фонд">
              <span class="fund-selector__icon">
                <!-- Building icon SVG -->
                <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 3L4 9v12h16V9l-8-6zm6 16H6v-9l6-4.5 6 4.5v9z"/>
                  <rect x="8" y="13" width="3" height="3"/>
                  <rect x="13" y="13" width="3" height="3"/>
                  <rect x="8" y="17" width="3" height="2"/>
                  <rect x="13" y="17" width="3" height="2"/>
                </svg>
              </span>
              <span class="fund-selector__value" id="fundSelectorValue">ДВН</span>
              <span class="fund-selector__arrow">
                <!-- Dropdown arrow SVG -->
                <svg viewBox="0 0 22 22" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M6 9l5 5 5-5H6z"/>
                </svg>
              </span>
            </button>

            <!-- Dropdown Menu -->
            <div class="fund-selector__dropdown" id="fundDropdown" role="listbox" aria-label="Список фондов">
              <div class="fund-selector__grid" id="fundGrid">
                <!-- Fund items will be rendered by JS -->
              </div>
            </div>
          </div>
        </div>

        <div class="header__right">
          <h2 class="chart__title" id="chartTitle">Выплата дохода акционерам (пайщикам), тыс. &#8381;</h2>
        </div>
      </header>

      <!-- Main Content -->
      <div class="content">
        <!-- Left: Budget Table -->
        <section class="content__table" aria-label="Таблица бюджета">

          <!-- View Toggle + Column Headers -->
          <div class="table-header" id="tableHeader">
            <button class="view-toggle" id="viewToggle" aria-label="Переключить режим отображения">
              <span id="viewToggleText">Детали за текущий год</span>
              <span class="view-toggle__arrow"></span>
            </button>
            <div class="table-header__columns" id="tableHeaderColumns">
              <!-- Headers will be rendered by JS -->
            </div>
          </div>

          <!-- Table Sections Container -->
          <div id="tableSections">
            <!-- Sections will be rendered by JS -->
          </div>

        </section>

        <!-- Right: Dividend Chart -->
        <section class="content__chart" aria-label="График дивидендов">
          <div class="chart">
            <div id="chartContainer">
              <!-- SVG Chart will be rendered by JS -->
            </div>
          </div>
        </section>
      </div>

    </article>
  </main>

  <!-- Data Configuration (will be overridden by external data if provided) -->
  <script>
    // Default data configuration
    window.DATA = window.DATA || {
      currentFund: 'ДВН',
      viewMode: 'details',
      funds: ['ДВН', 'ЗОЛЯ', 'КРАС', 'ЛОГ', 'НОР', 'ОЗН', 'ТРМ', 'СБЛ'],
      periods: [
        { year: 2023, type: 'fact', label: "Факт '23", shortLabel: "'23" },
        { year: 2024, type: 'fact', label: "Факт '24", shortLabel: "'24" },
        { year: 2025, type: 'mixed', label: "Факт (I-III кв. '25)\nПлан (IV кв. '25)", shortLabel: "'25" },
        { year: 2026, type: 'plan', label: "План '26", shortLabel: "'26" }
      ],
      chartConfig: {
        title: "Выплата дохода акционерам (пайщикам), тыс. ₽",
        metric: "Выплата дохода акционерам (пайщикам)",
        unit: "тыс. ₽",
        scale: {
          min: 100,
          max: 1000,
          step: 100
        },
        customValues: [390, 670, 860, 980], // Override calculated values
        colors: {
          fact: "#9DBCE0",
          plan: "#D9D9D9"
        }
      }
    };
  </script>

  <!-- Main Script (unified bundle) -->
  <script src="script.js"></script>

</body>
</html>
